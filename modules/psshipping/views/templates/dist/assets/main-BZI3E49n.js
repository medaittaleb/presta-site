import"./modulepreload-polyfill-B5Qt9EMX.js";import{d as $,t as Q,r as L,c as p,a as I,u as k,o as n,w as i,b as q,_ as U,e as x,f as z,g as J,s as V,h as K,i as P,j as N,k as W,l as X,m as G,T as Y,n as H,p as d,F as S,q as j,v as w,x as l,y as u,z as Z,A as ee,B as oe,C as se,D as te,E as ne,G as ae,H as re,I as ie,J as ce,K as le,L as pe,M as ue,N as de,O as e,P as me,Q as _e,R as he,S as fe,U as ge,V as ve,W as be,X as we,Y as ke}from"./globals-8apUMf73.js";import{k as Se,n as ye}from"./index-kjaw0yII.js";const Ce=$({__name:"nav-bar-item",props:{to:{},disabled:{type:Boolean}},setup(o){const s=o,{to:t,disabled:a}=Q(s);return(f,m)=>{const c=L("router-link");return k(a)?I("",!0):(n(),p(c,{key:0,to:k(t),class:"navigation__item","active-class":"navigation__item--active"},{default:i(()=>[q(f.$slots,"default",{},void 0,!0)]),_:3},8,["to"]))}}}),Ae=U(Ce,[["__scopeId","data-v-161b508a"]]);function F(o){const s=x(),t=z();if(o.errors){s.errors=o.errors;return}s.defaultIsoCode=o.defaultIsoCode,s.shops=o.shops,s.isMultiShopContext=o.isMultiShopContext,s.routes=o.routes,s.phpVersion=o.phpVersion,s.moduleVersion=o.moduleVersion,s.psVersion=o.psVersion,s.activeHooks=o.activeHooks||{},t.tokenPsAccounts=o.tokenPsAccounts,t.psxShippingApiUrl=o.psxShippingApiUrl}const Pe={class:"navigation"},xe=$({__name:"nav-bar",setup(o){const s=["Onboarding","NotFound"],{t}=J(),{onboarding:a}=V(x()),{getExpressCarrier:f,getStandardCarrier:m}=V(K()),c=W(),g=P(()=>f.value!==null||m.value!==null),v=N([{name:t("pages.landing"),disabled:!1,componentToPush:"Landing"},{name:t("pages.faq"),disabled:!1,componentToPush:"FAQ"}]),r=N([{name:t("pages.home"),disabled:!1,componentToPush:"Home"},{name:t("pages.carriers"),disabled:!1,componentToPush:"Carriers"},{name:t("pages.orders"),disabled:g.value,componentToPush:"Orders"},{name:t("pages.pricingAndInvoices"),disabled:!1,componentToPush:"PricingInvoices"},{name:t("pages.account"),disabled:!1,componentToPush:"Settings"},{name:t("pages.faq"),disabled:!1,componentToPush:"FAQ"}]),y=N([]),O=P(()=>!s.includes(c.name)),b={Landing:()=>[...v.value],FAQ:()=>a.value.done?[...r.value]:[...v.value],others:()=>[...r.value]},T=_=>{y.value=b[_]?b[_]():b.others()};return X(()=>c.name,_=>T(_),{deep:!0}),G(()=>T(c.name)),(_,E)=>{const B=Ae;return O.value?(n(),p(Y,{key:0,to:".header-toolbar"},[H("div",Pe,[(n(!0),d(S,null,j(y.value,(C,M)=>(n(),p(B,{key:M,to:{name:C.componentToPush},disabled:C.disabled},{default:i(()=>[w(l(C.name),1)]),_:2},1032,["to","disabled"]))),128))])])):I("",!0)}}}),Ve=U(xe,[["__scopeId","data-v-cfdfc42f"]]),Te={class:"puik-h2"},Ie=["data-test-shop-id"],$e={class:"puik-body-large-bold sh-grow"},Oe=$({__name:"multistore-selector",setup(o){const{shops:s}=V(x()),t=a=>{window.location.href=a};return(a,f)=>{const m=Z,c=ee,g=oe,v=se;return n(),d(S,null,[u(m,{title:a.$t("multistoreSelector.alertMultistoreDetected.title"),variant:"warning"},{default:i(()=>[w(l(a.$t("multistoreSelector.alertMultistoreDetected.message")),1)]),_:1},8,["title"]),u(v,{class:"sh-my-4"},{default:i(()=>[H("p",Te,l(a.$t("multistoreSelector.cardTitle")),1),u(m,{variant:"info"},{default:i(()=>[w(l(a.$t("multistoreSelector.alertInfo.message")),1)]),_:1}),(n(!0),d(S,null,j(k(s),r=>(n(),d("div",{key:r.shopId,"data-test-shop-id":r.shopId,class:"sh-flex sh-items-center"},[H("div",$e,[w(l(r.shopName)+" ",1),u(c,{class:"puik-body-small sh-ml-4",variant:"info"},{default:i(()=>[w(l(r.shopGroupName),1)]),_:2},1024)]),u(g,{onClick:y=>t(r.url)},{default:i(()=>[w(l(a.$t("multistoreSelector.configure")),1)]),_:2},1032,["onClick"])],8,Ie))),128))]),_:1})],64)}}}),Be={key:3,class:"sh-fixed sh-bottom-0 sh-right-0 sh-z-50 sh-text-white"},Me=$({__name:"App",setup(o){te({script:[{type:"text/javascript",src:window.psAccountCdnUrl,async:!1,defer:!0},{type:"text/javascript",src:"https://unpkg.com/@prestashopcorp/billing-cdc/dist/bundle.js",async:!1,defer:!0}]});const{errors:s,getIsMultishopContext:t,onboarding:a}=V(x()),{state:f}=V(ne()),{identify:m,group:c}=ae(),g=P(()=>window.contextPsAccounts?.currentShop?.uuid),v=P(()=>s.value.hasError),r=P(()=>s.value.errors.join(", ")),y=()=>{window.location.reload()};return G(()=>{m(),c()}),re(()=>{x().toggleOnboardingDone(window.isOnboardingDone)}),(O,b)=>{const T=Oe,_=ce,E=Ve,B=ye,C=Se,M=L("router-view");return n(),d(S,null,[v.value?(n(),p(ie,{key:0,"btn-content":"Reload page",error:500,message:r.value,title:O.$t("commons.errors.errorOccured"),onOnRetry:b[0]||(b[0]=A=>y())},null,8,["message","title"])):k(t)?(n(),p(_,{key:1},{default:i(()=>[u(T)]),_:1})):(n(),d(S,{key:2},[k(a).done?(n(),p(E,{key:0})):I("",!0),u(C,null,{default:i(()=>[(n(!0),d(S,null,j(k(f),A=>(n(),p(B,le({key:A.id,ref_for:!0},A),pe({_:2},[ue(A.action)?{name:"action",fn:i(()=>[(n(),p(de(A.action)))]),key:"0"}:void 0]),1040))),128))]),_:1}),u(M)],64)),g.value?(n(),d("div",Be,l(g.value),1)):I("",!0)],64)}}}),Ne=U(Me,[["__scopeId","data-v-0540c5a8"]]),Re=e.object({shopId:e.number(),shopIdGroup:e.number(),shopName:e.string(),shopGroupName:e.string(),url:e.string(),active:e.number()}),De=e.object({psxShippingApiUrl:e.string(),defaultIsoCode:e.string(),contextPsAccounts:me,tokenPsAccounts:e.string(),isMultiShopContext:e.boolean(),shops:Re.array().nonempty(),routes:e.record(e.string(),e.string()),phpVersion:e.string(),psAccountCdnUrl:e.string(),moduleVersion:e.string(),psVersion:e.string(),activeHooks:e.object({actionGetAdminOrderButtons:e.boolean().optional(),displayAdminOrderTabContent:e.boolean().optional(),displayAdminOrderTabLink:e.boolean().optional(),displayBackOfficeHeader:e.boolean().optional(),displayAdminOrderContentShip:e.boolean().optional(),displayAdminOrderTabShip:e.boolean().optional(),actionCarrierUpdate:e.boolean().optional()}).optional(),errors:e.object({hasError:e.boolean(),errors:e.array(e.string())}).optional()});function He(o){const s=De.safeParse(o);return s.success?{error:!1,data:s.data}:{error:!0,data:s.error.issues}}document.body.classList.add("no-smb-reskin");const Ue=_e(),h=he(Ne),je=fe();h.use(Ue);h.use(ge);h.use(je);h.use(ve);h.use(be);h.mount("#psshipping-settings");we({app:h,release:"v2.0.9",environment:"production",dsn:"https://c72374acc0a0dbf5eb93e8ea66ad7ff3@o298402.ingest.sentry.io/4505719553851392",integrations:[new ke({sessionSampleRate:.1,errorSampleRate:1})],tracesSampleRate:1});const R=He({psxShippingApiUrl:window.psxShippingApiUrl,defaultIsoCode:window.defaultIsoCode,contextPsAccounts:window.contextPsAccounts,tokenPsAccounts:window.tokenPsAccounts,psBillingContext:window.psBillingContext,isMultiShopContext:window.isMultiShopContext,psAccountCdnUrl:window.psAccountCdnUrl,shops:Object.values(window.shops),routes:window.routes,phpVersion:window.phpVersion,moduleVersion:window.moduleVersion,psVersion:window.psVersion,activeHooks:window.activeHooks}),D={hasError:!1,errors:[]};R.error===!1?F(R.data):(R.data.forEach(o=>D.errors.push(`${o.path}: ${o.message}`)),D.hasError=!0,F({errors:D}));
//# sourceMappingURL=main-BZI3E49n.js.map
